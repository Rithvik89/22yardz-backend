// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// TODO: Modify Users accordingly
model Users {
  id           BigInt          @id @default(autoincrement()) @db.BigInt
  created_at   DateTime        @default(now())
  Notification Notifications[]
  Interests    Interests[]
  Profile      Profile?

  @@map("users")
}

model Notifications {
  id BigInt @id @default(autoincrement()) @db.BigInt

  for      Users              @relation(fields: [for_id], references: [id])
  for_id   BigInt
  status   NotificationStatus
  metadata Json

  created_at DateTime @default(now())

  @@map("notifications")
}

model Interests {
  user_id        BigInt
  interest       String
  Users          Users    @relation(fields: [user_id], references: [id])
  Profile        Profile? @relation(fields: [profile_id], references: [user_id])
  profile_id BigInt?

  @@unique([user_id, interest])
  @@map("interests")
}

model Profile {
  user            Users       @relation(fields: [user_id], references: [id])
  user_id         BigInt      @unique
  username        String
  email_id        String
  profile_image   String
  registered_date DateTime
  bio             String
  cric_index      BigInt
  Interests       Interests[]

  @@map("profile")
}

enum NotificationStatus {
  Unseen
  Seen
  Read
}
